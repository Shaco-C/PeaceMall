# PeaceMall 

## 项目概述

PeaceMall 是一个基于微服务架构的现代化电子商务平台，提供完整的在线购物解决方案。系统支持用户注册登录、商品浏览购买、订单管理、商家入驻、支付结算等核心功能，为消费者、商家和平台管理员提供全方位的服务。

## 技术栈

### 后端技术栈

- **开发语言**: Java 11
- **微服务框架**: Spring Boot 2.7.12 + Spring Cloud 2021.0.3
- **服务治理**: Spring Cloud Alibaba 2021.0.4.0（Nacos 注册中心和配置中心）
- **数据访问层**: MyBatis-Plus 3.5.5
- **数据库**: MySQL 8.0.23
- **搜索引擎**: Elasticsearch 7.12.1
- **API 文档**: Swagger
- **工具库**: Lombok, Hutool
- **缓存**: Redis
- **消息队列**: RocketMQ

## 系统架构

PeaceMall 采用微服务架构，按业务功能划分为多个独立部署的服务，包括：

1. **API 网关**: 统一入口，请求路由，负载均衡
2. **用户服务**: 用户注册、登录、个人信息管理
3. **商品服务**: 商品管理、分类管理
4. **订单服务**: 订单创建、支付、物流
5. **购物车服务**: 购物车管理
6. **支付服务**: 钱包管理、充值、提现
7. **评价服务**: 商品评价、回复
8. **搜索服务**: 基于 Elasticsearch 的商品搜索
9. **优惠券服务**: 优惠券管理、使用
10. **商家服务**: 商家入驻、店铺管理
11. **文件服务**: 图片上传、存储
12. **日志服务**: 系统日志记录

## 技术亮点

### 1. 微服务架构设计

- **服务解耦**: 基于业务领域模型划分微服务，每个服务独立部署、独立扩展
- **服务注册与发现**: 使用 Nacos 实现服务注册与发现，提高系统可用性
- **配置中心**: 集中管理配置，支持动态配置刷新
- **服务网关**: 统一入口，实现路由转发、请求过滤、限流熔断等功能
- **Feign 远程调用**: 简化服务间通信，实现声明式 API 调用

### 2. 高性能搜索引擎

- **Elasticsearch 集成**: 实现商品的高效全文检索
- **自定义分词**: 针对商品名称、描述等进行中文分词优化
- **搜索建议**: 智能搜索提示功能
- **数据同步机制**: MySQL 与 Elasticsearch 数据实时同步

### 3. 分布式事务解决方案

- **TCC 事务**: 在关键业务流程中实现 Try-Confirm-Cancel 模式
- **最终一致性**: 基于消息队列的异步事务处理
- **分布式锁**: 防止并发操作导致的数据不一致

### 4. 安全架构

- **统一认证中心**: 基于 JWT 的用户认证
- **细粒度权限控制**: 基于角色的访问控制 (RBAC)
- **API 权限校验**: 接口级别的权限控制
- **数据脱敏**: 敏感数据自动脱敏处理
- **SQL 注入防护**: MyBatis 参数化查询

### 5. 高可用设计

- **服务集群**: 关键服务多实例部署
- **负载均衡**: 实现服务间的负载均衡
- **熔断降级**: 防止服务雪崩
- **限流保护**: 保护系统免受突发流量冲击
- **异步处理**: 关键业务异步化，提高系统吞吐量

### 6. 缓存策略

- **多级缓存**: 本地缓存 + Redis 分布式缓存
- **缓存穿透防护**: 布隆过滤器实现
- **缓存击穿防护**: 互斥锁 + 热点数据预加载
- **缓存雪崩防护**: 过期时间随机化

### 7. 支付体系

- **内部钱包系统**: 用户余额管理、交易流水记录
- **待确认金额机制**: 确保交易安全，防止资金损失
- **提现审核流程**: 完善的提现申请与审核机制

## 核心业务功能

### 1. 用户中心

- 用户注册、登录、个人信息管理
- 收货地址管理
- 普通用户申请成为商家的流程

### 2. 商品系统

- 三级分类管理
- 多规格商品配置（颜色、尺寸、版本等组合）
- 商品库存实时管理
- 商品上下架、审核机制

### 3. 订单系统

- 购物车结算
- 订单创建、支付、发货、收货完整流程
- 退货申请与处理

### 4. 营销系统

- 多种类型优惠券（满减、折扣、赠品等）
- 不同适用范围（全场、店铺、分类、商品）
- 灵活的有效期设置（固定时段或动态有效期）

### 5. 支付钱包

- 用户钱包余额管理
- 充值、提现功能
- 交易流水记录
- 待确认金额机制，保障交易安全

### 6. 评价系统

- 商品评分与文字评价
- 层级评价回复
- 评价管理与审核

### 7. 搜索系统

- 智能商品搜索
- 多维度筛选（分类、价格、品牌等）
- 搜索结果排序优化

### 8. 商家管理

- 商家入驻申请与审核
- 店铺信息管理
- 商品发布与管理
- 订单处理与物流管理

## 系统特点

1. **完整的电商业务链路**: 从用户注册到下单支付，再到评价反馈，覆盖电商全流程
2. **灵活的商品规格体系**: 支持复杂的商品多规格配置，满足多样化商品需求
3. **细致的权限控制**: 基于不同角色（普通用户、商家、管理员）的权限精细管理
4. **可靠的订单处理**: 完善的订单状态流转和异常处理机制
5. **安全的支付体系**: 内置钱包系统，待确认金额机制保障交易安全
6. **丰富的营销工具**: 多种类型优惠券，促进销售转化

## 项目特色

1. **微服务架构**: 松耦合设计，每个服务可独立演进
2. **高性能**: 合理的缓存策略和异步处理机制
3. **高可用**: 服务熔断、限流、降级保障系统稳定性
4. **可扩展**: 模块化设计，易于扩展新功能
5. **安全可靠**: 完善的安全机制和数据一致性保障
